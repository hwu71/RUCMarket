<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RUC Marketplace</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    
    <!--script src="eth-crypto/dist/lib/index.js"></script-->
    
  </head>
  <body>
    <div class="container" id="app" >
      
     <div class="row">
      <div class="col-lg-12">
            <h1 class="text-center">RUC Marketplace</h1>
            <hr/>
            <br/>
      </div>
       
       <div id="content" class="row col-12" style="display: none;">
         <div class="col-3">
            <div class="list-group">
             <a data-toggle="list" href="#view-product-content" class="list-group-item list-group-item-action active">View Products</a>
             <!--a data-toggle="list" href="#buy-product-content" class="list-group-item list-group-item-action">buy Products</a-->
             <a data-toggle="list" href="#add-product-content" class="list-group-item list-group-item-action">Add Products</a>
             <a data-toggle="list" href="#view-order-content" class="list-group-item list-group-item-action">View Orders</a>
             <a data-toggle="list" href="#buy-token-content" class="list-group-item list-group-item-action" onclick="App.renderToken();">Buy token</a>
             <a data-toggle="list" href="#add-courier-content" class="list-group-item list-group-item-action">Add Courier</a>
             <a data-toggle="list" href="#courier-register-content" class="list-group-item list-group-item-action">Courier Register</a>
            </div>
         </div>
         <div class="col-9">
           <div class="tab-content">
             <div class="tab-pane fade show active" id="view-product-content">
              <div class="card-deck"  id="product-content">
              <!-- Products load here -->
              </div>
             </div>
             <!--div class="tab-pane fade show" id="buy-product-content">
              buy products
             </div-->
             <div class="tab-pane fade" id="add-product-content">
                <form onSubmit="App.addProduct(); return false;" class="from-group" role="form"> 
                  <div>
                    <label for="nameOfProduct">Product Name</label> 
                    <input id="nameOfProduct" class="form-control" type="text" pattern="^[\u4E00-\u9FA5A-Za-z0-9_]+$" required="required">
                    <small class="form-text text-muted">Please input the name of the product.</small>
                  </div>
                  <br>
                  <div>
                    <label for="imageOfProduct">Product Image</label> 
                    <input id="imageOfProduct" class="form-control" type="url" pattern="[a-zA-z]+://[^\s]*" required="required">
                    <small class="form-text text-muted">Please input the online url of product's image.</small>
                  </div>
                  <br>
                  <div>
                    <label for="priceOfProduct">Product price</label>  
                    <input id="priceOfProduct" class="form-control" type="float" name="float" placeholder="1.0"  pattern="\d+(\.\d+)?$" required="required">
                    <small class="form-text text-muted">Please input the price of the product.</small>
                  </div>
                  <br>
                  <div>
                    <label for="numberOfProduct">Product number</label> 
                    <input id="numberOfProduct" class="form-control" type="number" name="number" placeholder="1" min="1" pattern="[0-9]" required="required">
                    <small class="form-text text-muted">Please input the number of the product.</small>
                  </div>
                  <br>
                  <button type="submit" class="btn btn-primary btn-lg form-group-btn" >Add Product</button>
                </form>
             </div>
             <div class="tab-pane fade" id="view-order-content"> 
                View orders!
             </div>
             <div class="tab-pane fade" id="buy-token-content">
               <div id="content" class="text-center" ></!--style="display: none;"-->
                  <p>
                    Introducing "RUC Token" (RUC Market)!
                    Token price is <span class="token-price"></span> Ether. You currently have <span class="ructoken-balance"></span>&nbsp;RUC Token.
                  </p>
                  <br/>
                  <form onSubmit="App.buyTokens(); return false;" role="form">
                    <div class="form-group">
                      <div class="input-group">
                        <input id="numberOfTokens" class="form-control input-lg" type="number" name="number" value="1" min="1" pattern="[0-9]">
                        <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary btn-lg">Buy Tokens</button>
                        </span>
                      </div>
                    </div>
                  </form>
                  <br>
                  <div class="progress">
                    <div id="progress" class="progress-bar progress-bar-striped active" aria-valuemin="0" aria-valuemax="100">
                    </div>
                  </div>
                  <p><span class="tokens-sold"></span> / <span class="tokens-available"></span> tokens sold</p>
                </div>
              </div>
             <div class="tab-pane fade" id="add-courier-content">
                <form onSubmit="App.addCourier(); return false;" class="from-group" role="form"> 
                  <div>
                    <label for="courierAddress">Courier Address</label> 
                    <input id="courierAddress" class="form-control" type="text" pattern="^(0x)+([A-Fa-f0-9]{40})$" required="required">
                    <small class="form-text text-muted">Please input the address of the certified courier.</small>
                  </div>
                  <br>
                  <button type="submit" class="btn btn-primary btn-lg form-group-btn" >Add courier</button>
                </form>
             </div>
             <div class="tab-pane fade" id="courier-register-content">
                <form onSubmit="App.courierRegister(); return false;" class="from-group" role="form"> 
                  <div>
                    <label for="companyName">Company Name</label> 
                    <input id="companyName" class="form-control" type="text" pattern="^[\u4E00-\u9FA5A-Za-z0-9_]+$" required="required">
                    <small class="form-text text-muted">Please input the name of the your company.</small>
                  </div>
                  <br>
                  <div>
                    <label for="deliverFee">Deliver fee</label>  
                    <input id="deliverFee" class="form-control" type="float" name="float"  pattern="\d+(\.\d+)?$" required="required">
                    <small class="form-text text-muted">Please input the deliver fee of your company.</small>
                  </div>
                  <br>
                  <div>
                    <label for="publicKey">Public Key</label> 
                    <textarea id="publicKey" rows="7" class="form-control" pattern="^(-----BEGIN PUBLIC KEY-----\s)?((.)+\s){4}(-----END PUBLIC KEY-----)?$" required="required">
                    </textarea>
                    <small class="form-text text-muted">Please input the public key of the your company.</small>
                  </div>
                  <br>
                  <button type="submit" class="btn btn-primary btn-lg form-group-btn" >Courier Register</button>
                </form>
             </div>
           </div> 
         </div>
       </div>

      </div>
      <div id="loader" class="text-center">
        <p >Loading...</p>
      </div>
      
    </div> <!--end of container-->

    <footer class="footer mt-auto py-3">
      <div class = container id="accountInfo">
        <hr>
        <p class="text-center" id="accountAddress"></p>
        <p class="text-center" id="ructoken-balance"></p>
      </div>
    </footer>
    

      <div id="productTemplate" style="display:none; width:400px; height:400px" class="card text-center">
          <div class="card-body text-center">
            <h3 class="card-title" id="productName">Apple</h3>
            <img alt="Card image" src="https://animalso.com/wp-content/uploads/2017/01/Golden-Retriever_6.jpg" width="200px" height="200px"><br/>
            <strong>Product Id</strong>: <span id="productId" class="card-text">1</span><br/>
            <strong>Price</strong>: <span id="productPrice" class="card-text">15</span><br/>
            <strong>Remaining</strong>: <span id="productRemainingNumber" class="card-text">3</span><br/>
            <!--strong>Seller</strong>: <span class="productSeller card-text">0x</span><br/-->
            <button id="buyButton" class="btn btn-primary" type="button" disabled="true" data-id="0" onClick="App.requestInfo(this); return false;" data-toggle="modal"  data-target="#requestProduct">Buy</button>
            <!--data-toggle="modal" data-target="#requestProduct"-->
          </div>    
      </div>

      <div class="modal fade" id="requestProduct" style="display:none;"> <!--start of modal-->
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- modal header -->
            <div class="modal-header">
              <h4 class="modal-title">Request product</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              
            </div>
            <!-- modal body -->
            <div class="modal-body">
              <form onSubmit="App.requestProduct(); return false;" class="from-group" id="requestProductForm" role="form">
                <div>
                  <label for="idOfProduct">Product id</label>  
                  <input id="idOfProduct" class="form-control" value="0" required="required" readonly>
                </div>
                <br>
                <div>
                  <label for="priceOfProduct">Product price</label>  
                  <input id="priceOfProduct" class="form-control" value="0" required="required" readonly>
                </div>
                <br>
                <div>
                  <label for="requestNumber">Request number</label> 
                  <input id="requestNumber" class="form-control" type="number" name="number" placeholder="1" min="1" max="999" pattern="[0-9]" required="required" >
                  <small class="form-text text-muted">Please input the number of the product you need.</small>
                </div>
                <br>
                <div>
                  <label for="chooseCourier">Choose a delivery company</label> 
                  <select id="chooseCourier" class="form-control" required="required">
                    
                  </select>

                  <small class="form-text text-muted">Please select one courier company to work for you.</small>
                </div>
                <br>
              </form>
            </div>
       
            <!-- modal footer-->
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancle</button>
              <button type="submit" class="btn btn-primary form-group-btn" data-dismiss="modal" onclick="App.requestProduct();" >Confirm</button>
            </div>
          </div>
        </div>
      </div> <!--end of modal-->

      <div id="orderTemplate" style="display: none;" class="">
        
      </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <script src="js/truffle-contract.min.js"></script>
    <script src="js/jsencrypt.min.js"></script>
    <script src="js/vue.min.js"></script>
    <!--script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script-->
    <script src="app.js"></script>
  </body>
</html>
